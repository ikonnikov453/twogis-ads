# twogis-ads

–ø—Ä–∏–º–µ—Ä spring boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —á–∏—Å—Ç–æ–º jdbc –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ "–ø—Ä–æ–¥–∞–∂–∏ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ 2–≥–∏—Å"

## —á—Ç–æ –≤–Ω—É—Ç—Ä–∏
- java 21
- spring-boot 3.3.3
- —Å–±–æ—Ä—â–∏–∫: maven
- –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö runtime: h2 (file-—Ä–µ–∂–∏–º), —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `data` —Ä—è–¥–æ–º —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- –¥–ª—è —Ç–µ—Å—Ç–æ–≤: h2 in-memory (jdbc:h2:mem:testdb)
- —Ä–∞–±–æ—Ç–∞ —Å –±–¥: **—Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π JDBC** (Connection, PreparedStatement, ResultSet) ‚Äî –Ω–µ—Ç JPA/Hibernate

## —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤
- `com.example.twogisads.entity` ‚Äî –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:
  - `Client` (clients)
  - `AdPackage` (ad_packages)
  - `Placement` (placements)
- `com.example.twogisads.repository` ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞ —á–∏—Å—Ç–æ–º JDBC
- `com.example.twogisads.service` ‚Äî —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- `com.example.twogisads.controller` ‚Äî REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (json)
- `com.example.twogisads.config` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, swagger, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## SOLID
- **S** ‚Äî –∫–∞–∂–¥—ã–π —Å–ª–æ–π (controller, service, repository) –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ—é —Ä–æ–ª—å
- **O** ‚Äî –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∞—Å—Å–æ–≤
- **L** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, JDBC –∏–ª–∏ mock –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
- **I** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞, –∞ —Ç–æ–ª—å–∫–æ –æ—Ç –Ω—É–∂–Ω—ã—Ö
- **D** ‚Äî —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã

## api (endpoints)
—Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî JSON

## –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
**1:** –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (src/main/java/com/example/twogisads/TwogisAdsApplication.java)

**2:** –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ endpoint 

http://localhost:8080/swagger-ui/index.html#/

## —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤
üîπ **GET** ‚Äî —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç)  
üîπ **POST** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏  
üîπ **PUT** ‚Äî –ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏  
üîπ **DELETE** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É

## –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
—Å–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞:
```bash
curl -X POST http://localhost:8080/clients \
  -H "Content-Type: application/json" \
  -d '{"legalName":"–û–û–û new","companyName":"c","contactPerson":"p","phone":"+7","email":"e@e"}'
```
## —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (Maven ‚Üí Lifecycle ‚Üí test)

### –¢–µ–æ—Ä–∏—è –æ MockMvc

- MockMvc –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ GET, POST, PUT, DELETE –∑–∞–ø—Ä–æ—Å–æ–≤, —Å—Ç–∞—Ç—É—Å–∞, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ JSON

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Spring Boot, –∏—Å–ø–æ–ª—å–∑—É—è in-memory –±–∞–∑—É

–ü—Ä–∏–º–µ—Ä:
```
mockMvc.perform(get("/clients"))
.andExpect(status().isOk())
.andExpect(jsonPath("$[0].legalName").value("–û–û–û —Ç–µ—Å—Ç"));
```
## —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

- –ö–∞–∂–¥—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π —á–µ—Ä–µ–∑ —á–∏—Å—Ç—ã–π JDBC

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Connection, PreparedStatement, ResultSet

- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –æ—Ç–¥–µ–ª—ë–Ω –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å mock-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤

- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–µ –∑–Ω–∞—é—Ç –æ HTTP –∏–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö ‚Äî —Ç–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π

## —Å–µ—Ä–≤–∏—Å—ã

- –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏

- –°–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é, —Ä–∞—Å—á—ë—Ç—ã, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

–ü—Ä–∏–º–µ—Ä:
```
public List<Placement> getPlacementsByClient(int clientId) {
// –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
Client client = clientRepository.findById(clientId).orElseThrow(...);
// –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
return placementRepository.findByClientId(clientId);
}
```
## –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON

- –í–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π, –∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é —Å JDBC

- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–µ –∏ —Ñ–∏–ª—å—Ç—Ä—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–æ–≤

–ü—Ä–∏–º–µ—Ä:
```
@GetMapping("/clients/search")
public List<Client> searchClients(@RequestParam String legalName) {
return clientService.findByLegalName(legalName);
}
```